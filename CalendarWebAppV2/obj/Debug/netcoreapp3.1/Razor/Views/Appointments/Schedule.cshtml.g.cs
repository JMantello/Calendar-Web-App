#pragma checksum "C:\Users\jonat\Personal Documents\Coding Projects\Capstone Project\CalendarWebAppV2\CalendarWebAppV2\Views\Appointments\Schedule.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "f4f5d68850aa5cc395967eda83e1a8699785d77c"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Appointments_Schedule), @"mvc.1.0.view", @"/Views/Appointments/Schedule.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "C:\Users\jonat\Personal Documents\Coding Projects\Capstone Project\CalendarWebAppV2\CalendarWebAppV2\Views\_ViewImports.cshtml"
using CalendarWebAppV2.Models.EntityModels;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\jonat\Personal Documents\Coding Projects\Capstone Project\CalendarWebAppV2\CalendarWebAppV2\Views\_ViewImports.cshtml"
using CalendarWebAppV2.Models.AppointmentsViewModels;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\jonat\Personal Documents\Coding Projects\Capstone Project\CalendarWebAppV2\CalendarWebAppV2\Views\_ViewImports.cshtml"
using CalendarWebAppV2.Models.HostsViewModels;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\jonat\Personal Documents\Coding Projects\Capstone Project\CalendarWebAppV2\CalendarWebAppV2\Views\_ViewImports.cshtml"
using CalendarWebAppV2.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\jonat\Personal Documents\Coding Projects\Capstone Project\CalendarWebAppV2\CalendarWebAppV2\Views\_ViewImports.cshtml"
using CalendarWebAppV2;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\jonat\Personal Documents\Coding Projects\Capstone Project\CalendarWebAppV2\CalendarWebAppV2\Views\_ViewImports.cshtml"
using Syncfusion.EJ2;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"f4f5d68850aa5cc395967eda83e1a8699785d77c", @"/Views/Appointments/Schedule.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"21be704b08ada88943c1be63a6689527088d1175", @"/Views/_ViewImports.cshtml")]
    #nullable restore
    public class Views_Appointments_Schedule : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<ScheduleVM>
    #nullable disable
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("class", new global::Microsoft.AspNetCore.Html.HtmlString("rounded-top-left"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_1 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("height", new global::Microsoft.AspNetCore.Html.HtmlString("200"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_2 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("width", new global::Microsoft.AspNetCore.Html.HtmlString("200"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_3 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("id", "calendar", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_4 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("class", new global::Microsoft.AspNetCore.Html.HtmlString("m-auto e-bigger"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_5 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("change", "getDateSelection", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_6 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("id", new global::Microsoft.AspNetCore.Html.HtmlString("dateTimeForm"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_7 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("asp-controller", "Appointments", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_8 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("asp-action", "Schedule", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_9 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("method", "post", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        #pragma warning restore 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper;
        private global::Syncfusion.EJ2.Calendars.Calendar __Syncfusion_EJ2_Calendars_Calendar;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral("\r\n");
#nullable restore
#line 3 "C:\Users\jonat\Personal Documents\Coding Projects\Capstone Project\CalendarWebAppV2\CalendarWebAppV2\Views\Appointments\Schedule.cshtml"
  
    var minDate = DateTimeOffset.Now;
    string hostName = Model.Host.FirstName + " " + Model.Host.LastName;

#line default
#line hidden
#nullable disable
            WriteLiteral(@"
<style>
    .e-calendar {
        /* background-color: white;*/
        border: none;
        padding: 10px;
    }

    .scrollable-height {
        height: 470px;
    }

    .timeslot {
        cursor: pointer;
        border-radius: 5px;
    }
     
    .timeslot:hover {
        background-color: azure;
    }

    .rounded-top-left {
        border-top-left-radius: 3px !important;
    }

</style>
<br />
<div class=""card bg-light m-auto shadow rounded pb-2"">
    <div class=""card-header p-0 "">
        <div class=""d-sm-flex"">
");
            WriteLiteral("            <div");
            BeginWriteAttribute("class", " class=\"", 750, "\"", 758, 0);
            EndWriteAttribute();
            WriteLiteral(" height=\"200\" width=\"200\">\r\n                ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("img", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagOnly, "f4f5d68850aa5cc395967eda83e1a8699785d77c9148", async() => {
            }
            );
            __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
            BeginAddHtmlAttributeValues(__tagHelperExecutionContext, "src", 2, global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
            AddHtmlAttributeValue("", 813, "~/ProfileImages/", 813, 16, true);
#nullable restore
#line 39 "C:\Users\jonat\Personal Documents\Coding Projects\Capstone Project\CalendarWebAppV2\CalendarWebAppV2\Views\Appointments\Schedule.cshtml"
AddHtmlAttributeValue("", 829, Model.Host.ProfileImage, 829, 24, false);

#line default
#line hidden
#nullable disable
            EndAddHtmlAttributeValues(__tagHelperExecutionContext);
            BeginAddHtmlAttributeValues(__tagHelperExecutionContext, "alt", 3, global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
#nullable restore
#line 40 "C:\Users\jonat\Personal Documents\Coding Projects\Capstone Project\CalendarWebAppV2\CalendarWebAppV2\Views\Appointments\Schedule.cshtml"
AddHtmlAttributeValue("", 882, hostName, 882, 9, false);

#line default
#line hidden
#nullable disable
            AddHtmlAttributeValue(" ", 891, "Profile", 892, 8, true);
            AddHtmlAttributeValue(" ", 899, "Image", 900, 6, true);
            EndAddHtmlAttributeValues(__tagHelperExecutionContext);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_0);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_1);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_2);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n            </div>\r\n\r\n            <div class=\"p-3 flex-fill text-center\">\r\n                <p class=\"lead\">Scheduling with ");
#nullable restore
#line 45 "C:\Users\jonat\Personal Documents\Coding Projects\Capstone Project\CalendarWebAppV2\CalendarWebAppV2\Views\Appointments\Schedule.cshtml"
                                           Write(hostName);

#line default
#line hidden
#nullable disable
            WriteLiteral("</p>\r\n                <p>");
#nullable restore
#line 46 "C:\Users\jonat\Personal Documents\Coding Projects\Capstone Project\CalendarWebAppV2\CalendarWebAppV2\Views\Appointments\Schedule.cshtml"
              Write(Model.Host.Email);

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n");
#nullable restore
#line 47 "C:\Users\jonat\Personal Documents\Coding Projects\Capstone Project\CalendarWebAppV2\CalendarWebAppV2\Views\Appointments\Schedule.cshtml"
                     if(!String.IsNullOrEmpty(Model.Host.Phone))
                    {

#line default
#line hidden
#nullable disable
            WriteLiteral("                        <span> | ");
#nullable restore
#line 49 "C:\Users\jonat\Personal Documents\Coding Projects\Capstone Project\CalendarWebAppV2\CalendarWebAppV2\Views\Appointments\Schedule.cshtml"
                            Write(Model.Host.Phone);

#line default
#line hidden
#nullable disable
            WriteLiteral("</span>\r\n");
#nullable restore
#line 50 "C:\Users\jonat\Personal Documents\Coding Projects\Capstone Project\CalendarWebAppV2\CalendarWebAppV2\Views\Appointments\Schedule.cshtml"
                    }

#line default
#line hidden
#nullable disable
            WriteLiteral("                </p>\r\n            </div>\r\n\r\n\r\n        </div>\r\n    </div>\r\n    <br />\r\n\r\n    <div class=\"row justify-content-center p-1\">\r\n");
            WriteLiteral("        <div class=\"col-md-5 pb-4\">\r\n            ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("ejs-calendar", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "f4f5d68850aa5cc395967eda83e1a8699785d77c13556", async() => {
            }
            );
            __Syncfusion_EJ2_Calendars_Calendar = CreateTagHelper<global::Syncfusion.EJ2.Calendars.Calendar>();
            __tagHelperExecutionContext.Add(__Syncfusion_EJ2_Calendars_Calendar);
            __Syncfusion_EJ2_Calendars_Calendar.Id = (string)__tagHelperAttribute_3.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_3);
#nullable restore
#line 63 "C:\Users\jonat\Personal Documents\Coding Projects\Capstone Project\CalendarWebAppV2\CalendarWebAppV2\Views\Appointments\Schedule.cshtml"
__Syncfusion_EJ2_Calendars_Calendar.Min = minDate;

#line default
#line hidden
#nullable disable
            __tagHelperExecutionContext.AddTagHelperAttribute("min", __Syncfusion_EJ2_Calendars_Calendar.Min, global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_4);
            __Syncfusion_EJ2_Calendars_Calendar.Change = (string)__tagHelperAttribute_5.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_5);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n        </div>\r\n\r\n");
            WriteLiteral("        <div class=\"col-md-7 px-4\">\r\n");
            WriteLiteral(@"            <div class=""btn-group btn-group-toggle d-flex justify-content-center""
                 data-toggle=""buttons""
                 for=""durationSelection"">
                <label class=""btn btn-secondary active"">
                    <input type=""radio"" name=""durationOption"" value=""15"" id=""btn-15-mins"" checked onchange=""renderTimeslots()""> 15 mins
                </label>
                <label class=""btn btn-secondary"">
                    <input type=""radio"" name=""durationOption"" value=""30"" id=""btn-30-mins"" onchange=""renderTimeslots()""> 30 mins
                </label>
                <label class=""btn btn-secondary"">
                    <input type=""radio"" name=""durationOption"" value=""60"" id=""btn-60-mins"" onchange=""renderTimeslots()""> 60 mins
                </label>
            </div>

");
            WriteLiteral("            <h6 class=\"pt-4 pb-2 px-2\">Time Slots:</h6>\r\n\r\n            <div class=\"scrollable-height overflow-auto scrollbar-primary pr-2 pb-2\">\r\n                ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("form", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "f4f5d68850aa5cc395967eda83e1a8699785d77c16530", async() => {
                WriteLiteral("\r\n                    <div class=\"row list-group w-95 m-0 text-center\" id=\"timeslots\">\r\n");
                WriteLiteral("                    </div>\r\n                ");
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_6);
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper.Controller = (string)__tagHelperAttribute_7.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_7);
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper.Action = (string)__tagHelperAttribute_8.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_8);
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper.Method = (string)__tagHelperAttribute_9.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_9);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral(@"
            </div>
        </div>
    </div>

</div>

<script>
    let model = null;
    let hostId = null;
    let appointments = null;
    let availability = null;
    let timeslotsElem = null;
    let dateSelection = null;
    let durationValue = null;
    let DateTime = luxon.DateTime;

    window.onload = (event) => {
        model = JSON.parse('");
#nullable restore
#line 114 "C:\Users\jonat\Personal Documents\Coding Projects\Capstone Project\CalendarWebAppV2\CalendarWebAppV2\Views\Appointments\Schedule.cshtml"
                       Write(Html.Raw(Json.Serialize(Model)));

#line default
#line hidden
#nullable disable
            WriteLiteral(@"');
        hostId = model.host.id;
        appointments = model.appointments;
        availability = model.host.hostAvailability;
        timeslotsElem = document.getElementById(""timeslots"");
        dateSelection = DateTime.now();
        renderTimeslots();

        console.log(model);
    };

    function getDateSelection(args) {
        var intl = new ej.base.Internationalization();
        var value = intl.formatDate(args.value, { type: 'dateTime', format: 'dd/MM/yyyy' });
        dateSelection = DateTime.fromFormat(value, 'dd/MM/yyyy');
        renderTimeslots();
    }

    function reformatDate(date) {
        // dd/MM/yyyy --> MM/dd/yyyy
        const [day, month, year] = date.split('/');
        const result = [month, day, year].join('/');
        return result;
    }

    function toLuxon(dateIn) {
        let parsedDate = DateTime.fromISO(dateIn);

        if (!parsedDate.isValid) {
            parsedDate = DateTime.fromFormat(dateIn, ""MM/dd/yyyy"");
        }

      ");
            WriteLiteral(@"  if (!parsedDate.isValid) {
            parsedDate = DateTime.fromFormat(dateIn, ""M/dd/yyyy"");
        }

        if (!parsedDate.isValid) {
            parsedDate = ""Non-valid date - from toLuxon"";
        }

        return parsedDate;
    }

    function getDurationValue() {
        durationValue = document.querySelector('input[name=""durationOption""]:checked').value;
    }

    function renderTimeslots() {
        // Clear timeslots section
        timeslotsElem.textContent = """";

        // Get duration
        getDurationValue();

        // Get day's availability
        let daysAvailability = availability.filter(a => a.dayOfWeek == dateSelection.weekday);

        // Get appointments within day
        let sameDayAppointments = [];

        sameDayAppointments = appointments.filter(appointment =>
            dateSelection.toLocaleString() == toLuxon(appointment.start).toLocaleString()
            ||
            dateSelection.toLocaleString() == toLuxon(appointment.end).to");
            WriteLiteral(@"LocaleString()
        );

        // Render timeslots HTML
        if (daysAvailability.length == 0) { timeslotsElem.innerText = ""No available times.""; }
        else {
            // Create hidden userId input
            let userIdInputElem = document.createElement(""input"");
            userIdInputElem.setAttribute(""name"", ""hostId"");
            userIdInputElem.setAttribute(""value"", hostId);
            userIdInputElem.setAttribute(""hidden"", ""true"");
            timeslotsElem.appendChild(userIdInputElem);

            // Create hidden date input element
            let dateInputElem = document.createElement(""input"");
            dateInputElem.setAttribute(""id"", ""dateTimeInput"");
            dateInputElem.setAttribute(""name"", ""dateTimeSelection"");
            dateInputElem.setAttribute(""value"", """");
            dateInputElem.setAttribute(""hidden"", ""true"");
            timeslotsElem.appendChild(dateInputElem);

            // Create hidden duration input element
            let duration");
            WriteLiteral(@"InputElem = document.createElement(""input"");
            durationInputElem.setAttribute(""id"", ""durationInput"");
            durationInputElem.setAttribute(""name"", ""duration"");
            durationInputElem.setAttribute(""value"", durationValue);
            durationInputElem.setAttribute(""hidden"", ""true"");
            timeslotsElem.appendChild(durationInputElem);

            // Create timeslots for each entry in users availability
            daysAvailability.forEach(da => {
                // Convert date inputs to date object
                let startDateString = dateSelection.toISODate() + ""T"" + da.startTime;
                let endDateString = dateSelection.toISODate() + ""T"" + da.endTime;
                let startDateTime = toLuxon(startDateString);
                let endDateTime = toLuxon(endDateString);

                let dayCounter = startDateTime;
                let now = DateTime.now();

                if (dayCounter.toISODate() == now.toISODate()) {
                    // Adva");
            WriteLiteral(@"nce counter to current time, ensuring no past times are generated
                    while (dayCounter < now) {
                        dayCounter = dayCounter.plus({ minutes: durationValue });
                    }
                }

                /*  Unaddressed cases:
                     -Check case where duration is 1hr but start time is not on the hour
                */

                // Generate the timeslots
                let timeslots = [];

                while (dayCounter < endDateTime) {

                    // Check for appointment conflicts
                    sameDayAppointments.forEach(appointment => {
                        let appointmentStart = toLuxon(appointment.start);
                        let appointmentEnd = toLuxon(appointment.end);

                        // Fast forward >> the counter to end of appointment if conflict
                        while (appointmentStart <= dayCounter && dayCounter < appointmentEnd) {
                            dayCoun");
            WriteLiteral(@"ter = dayCounter.plus({ minutes: durationValue });
                        }

                        // Are we checking so that we don't put out a timeslot that will conflict
                        // with an existing appointment?
                        // i.e -> making a 1 hour timeslot at 10:00AM that conflicts with
                        // a 15 minute 10:45AM appointment
                    });

                    // Create HTML for Available Timeslot
                    let timeOption = document.createElement(""a"");
                    timeOption.classList.add(""list-group-item"");
                    timeOption.classList.add(""list-group-item-action"");
                    timeOption.classList.add(""text-center"");
                    timeOption.classList.add(""timeslot"");
                    timeOption.setAttribute(""value"", dayCounter.toISO());
                    timeOption.setAttribute(""onclick"", ""submitForm(this)"");

                    let displayTime = dayCounter.toLocaleString(Date");
            WriteLiteral(@"Time.TIME_SIMPLE);
                    timeOption.innerText = displayTime;

                    // Increase counter
                    dayCounter = dayCounter.plus({ minutes: durationValue });

                    // Push timeslot element
                    timeslots.push(timeOption);
                }

                // Append timeslots or empty message
                if (timeslots.length == 0) {
                    timeslotsElem.innerText = ""No available times."";
                } else {
                    timeslots.forEach(timeOption => {
                        timeslotsElem.appendChild(timeOption);
                    });
                }

            });
        }
    }

    function submitForm(sender) {
        // Set dateTimeInput value from sender
        let dateTimeInput = document.getElementById(""dateTimeInput"");
        dateTimeInput.value = sender.getAttribute(""value"");

        // Submit form
        let dateTimeForm = document.getElementById(""dateTimeForm"");");
            WriteLiteral("\n        dateTimeForm.submit();\r\n    }\r\n\r\n</script>\r\n\r\n");
        }
        #pragma warning restore 1998
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<ScheduleVM> Html { get; private set; } = default!;
        #nullable disable
    }
}
#pragma warning restore 1591
